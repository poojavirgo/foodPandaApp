{"ast":null,"code":"var _store$get, _store$get2, _store$get3, _store$get4;\n\nimport React from 'react';\n\nvar store = require('store');\n\nexport const initialState = {\n  id: 0,\n  loggedIn: (_store$get = store.get('loggedIn')) !== null && _store$get !== void 0 ? _store$get : false,\n  list: (_store$get2 = store.get('orderedItems')) !== null && _store$get2 !== void 0 ? _store$get2 : [],\n  totalItems: (_store$get3 = store.get(\"totalitems\")) !== null && _store$get3 !== void 0 ? _store$get3 : 0,\n  totalCost: (_store$get4 = store.get(\"totalCost\")) !== null && _store$get4 !== void 0 ? _store$get4 : 0\n};\n\nconst myReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  const {\n    type\n  } = action;\n\n  switch (type) {\n    case 'set_id':\n      return { ...state,\n        id: action.payload\n      };\n\n    case 'addItem':\n      let {\n        list\n      } = state;\n      let {\n        payload\n      } = action;\n\n      if (list === undefined || list.length === 0) {\n        let newList = { ...state,\n          list: [{ ...payload,\n            quantity: 1\n          }]\n        };\n        store.set(\"orderedItems\", newList[\"list\"]);\n        return newList;\n      } else if (list.filter(item => item.id === payload.id).length === 0) {\n        let newList = { ...state,\n          list: [...list, { ...payload,\n            quantity: 1\n          }]\n        };\n        store.set(\"orderedItems\", newList[\"list\"]);\n        return newList;\n      } else {\n        let newList = { ...state,\n          list: list.map(item => item.id === payload.id ? { ...item,\n            quantity: item.quantity + 1\n          } : item)\n        };\n        store.set(\"orderedItems\", newList[\"list\"]);\n        return newList;\n      }\n\n    case 'deleteItem':\n      let pll = action.payload; //console.log(\"in delete\");           \n\n      const t = state.list.map(item => item.id === pll.id ? { ...item,\n        quantity: item.quantity - 1\n      } : item);\n      let newList = { ...state,\n        list: t.filter(a => a.quantity !== 0)\n      };\n      store.set(\"orderedItems\", newList[\"list\"]);\n\n      if (store.get(\"orderedItems\").length === 0) {\n        store.set(\"totalitems\", 0);\n        store.set(\"totalCost\", 0);\n      }\n\n      return newList;\n\n    case 'getTotalItems':\n      if (state.list.length > 0) {\n        let totalitems = { ...state,\n          totalItems: state.list.map(a => a.quantity).reduce((a, b) => a + b)\n        };\n        store.set(\"totalitems\", totalitems[\"totalItems\"]);\n        return totalitems;\n      } else return { ...state,\n        totalItems: 0\n      };\n\n    case 'clearCart':\n      store.remove(\"orderedItems\");\n      store.remove(\"totalitems\");\n      return { ...state,\n        list: []\n      };\n\n    case 'totalCost':\n      if (state.list.length > 0) {\n        store.set('totalCost', state.list.map(l => l.quantity * l.price).reduce((a, b) => a + b));\n        return { ...state,\n          totalCost: state.list.map(l => l.quantity * l.price).reduce((a, b) => a + b)\n        };\n      }\n\n      break;\n\n    case 'checkUser':\n      const pl = action.payload,\n            u = action.user;\n\n      if (pl.length) {\n        const user = pl.filter(p => p.mail === u.mail && p.psd === u.psd);\n\n        if (user.length) {\n          axios.put(`https://my-json-yumito-server.herokuapp.com/users/${user[0].id}`, { ...user[0],\n            loggedIn: true\n          }).then(res => {\n            store.set('user', user[0]);\n            store.set('loggedIn', true);\n          }).catch(e => alert(\"Something gone wrong\"));\n          return { ...state,\n            loggedIn: true\n          };\n        } else {\n          alert(\"Please enter valid credentials\");\n          store.set('loggedIn', false);\n          return { ...state,\n            loggedIn: false\n          };\n        }\n      } else {\n        console.log(\"User data not found\");\n      }\n\n      break;\n\n    case 'logOut':\n      store.clearAll();\n      return { ...initialState,\n        loggedIn: false,\n        list: [],\n        totalItems: 0,\n        totalCost: 0\n      };\n    //return {...state,}\n\n    default:\n      return state;\n  }\n};","map":{"version":3,"sources":["/Users/mac/Documents/fooddelivery/src/store/reducer.js"],"names":["React","store","require","initialState","id","loggedIn","get","list","totalItems","totalCost","myReducer","state","action","type","payload","undefined","length","newList","quantity","set","filter","item","map","pll","t","a","totalitems","reduce","b","remove","l","price","pl","u","user","p","mail","psd","axios","put","then","res","catch","e","alert","console","log","clearAll"],"mappings":"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","sourcesContent":["import React from 'react';\nvar store = require('store');\n\nexport const initialState={  \n    id: 0,\n    loggedIn:store.get('loggedIn') ?? false,\n    list:store.get('orderedItems')??[],\n    totalItems:store.get(\"totalitems\") ?? 0,\n    totalCost:store.get(\"totalCost\") ?? 0\n  }\n\n  const myReducer= (state=initialState, action)=>{\n    const {type} =action; \n    switch(type){\n              case 'set_id':\n                return {...state, id:action.payload}\n                case 'addItem':\n                  let {list} =state ;\n                  let {payload}=action;\n                 \n                if(list===undefined || list.length===0){\n                  let newList = {...state,  list:[{...payload, quantity:1}]};\n                  store.set(\"orderedItems\", newList[\"list\"]);\n                  return newList;\n                  }\n                  else if(list.filter(item => item.id === payload.id ).length === 0){\n                    let newList = {...state,  list:[...list, {...payload, quantity:1}]};\n                    store.set(\"orderedItems\", newList[\"list\"]);\n                    return newList;\n                    }\n                  else{\n                    let newList =  {...state, list :list.map(item => item.id === payload.id ? {...item, quantity: item.quantity +1} :item) };\n                    store.set(\"orderedItems\", newList[\"list\"]);\n                    return newList;\n                  } \n                case 'deleteItem':\n                   let pll=action.payload;         \n                 //console.log(\"in delete\");           \n                const t=state.list.map((item) => \n              (item.id === pll.id) ? \n              {...item,quantity:item.quantity-1}: item );\n              let newList =  {...state, list: t.filter(a=> a.quantity !== 0) };\n                store.set(\"orderedItems\",newList[\"list\"])  ;\n                if(store.get(\"orderedItems\").length===0){\n                  store.set(\"totalitems\",0);\n                  store.set(\"totalCost\",0);\n                }\n                return newList;    \n                \n                  case 'getTotalItems':\n                    if(state.list.length>0){\n                    let totalitems = {...state, totalItems:state.list.map(a=>a.quantity).reduce((a,b)=>a+b)};\n                   store.set(\"totalitems\", totalitems[\"totalItems\"]);\n                  return totalitems;\n                }\n                    else return {...state, totalItems:0 }\n  \n                  case 'clearCart':\n                    store.remove(\"orderedItems\");\n                    store.remove(\"totalitems\");\n                    return {...state, list:[]}\n                    case 'totalCost':\n                      if(state.list.length>0){\n                        store.set('totalCost', state.list.map(l=> (l.quantity*l.price)).reduce((a,b)=>a+b));\n                      return {...state, totalCost: state.list.map(l=> (l.quantity*l.price)).reduce((a,b)=>a+b)}\n                      }\n                      break;\n                      case 'checkUser':\n                        const pl=action.payload, u=action.user;\n                        if(pl.length){\n                          const user =  pl.filter(p=> (\n                            p.mail === u.mail && p.psd===u.psd ))\n                            if(user.length){\n                              axios.put(`https://my-json-yumito-server.herokuapp.com/users/${user[0].id}`,{...user[0],loggedIn:true})\n                              .then(res =>{ \n                                store.set('user',user[0]);\n                                store.set('loggedIn' ,true);\n                              } )\n                              .catch(e=>alert(\"Something gone wrong\"))\n                              \n                          return {...state, loggedIn:true}          \n                            }            \n                          else{ \n                            alert(\"Please enter valid credentials\");\n                            store.set('loggedIn' ,false);\n                           return {...state, loggedIn:false}\n                        }\n                      }\n                      else{\n                        console.log(\"User data not found\");\n                      }\n                        break;\n                        \n                     case 'logOut':\n                      \n                      store.clearAll();\n                      return {...initialState, loggedIn:false, list:[],totalItems:0,totalCost:0}\n                      \n                       //return {...state,}\n                         \n          default:\n         return state;\n    }\n  }"]},"metadata":{},"sourceType":"module"}